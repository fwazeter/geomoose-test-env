function BingGeocoder(e,t){this.title=t.title?t.title:"Search address",this.resultsTitle=t.resultsTitle?t.resultsTitle:"Address search results",this.tools={},this.fields=[{name:"address",type:"text",label:"Address"}],this.highlightPath=t.highlightPath?t.highlightPath:"highlight/highlight",this.template='<div class="search-result"><a onClick="app.zoomToExtent([{{ bbox.1 }}, {{ bbox.0 }}, {{ bbox.3 }}, {{ bbox.2 }}], \'EPSG:4326\')" class="zoomto-link"><i class="fa fa-search"></i>{{ name }}</a></div>',this.resultsAsHtml=function(t,s){return""+e.renderFeaturesWithTemplate(s,"geocoder",this.template)},this.runQuery=function(s,i){var r=this.highlightPath;gm3.util.xhr({url:"http://dev.virtualearth.net/REST/v1/Locations",type:"jsonp",jsonp:"jsonp",jsonpCallback:"jsonp",data:{key:t.key,query:i.fields[0].value},success:function(t){e.dispatch({id:s,type:"MAP_QUERY_RESULTS",layer:"geocoder",features:t.resourceSets[0].resources}),e.dispatch({id:s,type:"MAP_QUERY_FINISHED"});for(var i=[],o=t.resourceSets[0].resources,a=0,h=o.length;a<h;a++){var l=o[a];i.push({type:"Feature",geometry:{type:"Point",coordinates:[l.point.coordinates[1],l.point.coordinates[0]]},properties:{id:"address"+a}})}i.length>0&&(e.clearFeatures(r),e.addFeatures(r,i))}})},this.query=function(t,s){e.dispatchQuery(this.name,t,s,[])}}"undefined"!=typeof module&&(module.exports=BingGeocoder);